### 字典

字典是另一种可变容器模型，且可存储任意类型对象。

字典的每个键值 **key:value** 对用冒号 **:** 分割，每个键值对之间用逗号 **,** 分割，整个字典包括在花括号 **{}** 中。字典的本质是是键到值的**映射（mapping）。**

#### 创建字典

可通过`dictionary = {key1:val1, key2:val2}`的格式创建字典：

```
data = {"key1": 2, "key2": 4}
```

**键**一般是**唯一**的，如果重复最后的一个键值对会替换前面的，值不需要唯一。

#### 值的检索

字典中的元素是**无序**的，即元素无固定存储顺序，无法通过索引（如列表下标）访问，需要通过 `dictionary[key]` 形式检索值。

```python
print(data["key1"])	# 打印出 2
```

**注意：**若键存在，返回关联值；若键不存在，触发 **KeyError 异常**（表示键在字典中未定义）。

可以使用`key in dict`检测键是否在字典里：

```python
if "key3" in data:
    print("key 3 exists")
else:
    print("no key 3")
    
# 因为key3不存在，打印 no key 3
```

`dict.get(key, default)`可在不触发异常的情况下获取值，如果键不存在，则返回`default`设定的值(未设定则默认为`None`)

```python
print(data.get("key3"))	# 不存在且未设定default, 返回None
print(data.get("key3", 100))	# 	不存在,返回default值，即100
```

#### 向现有字典添加/修改/删除元素

字典是**可变对象**（mutable objects），创建后可修改其内容（添加、删除、修改键值对）。

##### 添加/修改元素

使用`dictionary[key] = value`对字典进行添加键值对，如果该键存在，则对值进行覆盖(修改)

```python
tinydict = {'Name': 'Zara', 'Age': 7, 'Class': 'First'}
 
tinydict['Age'] = 8 # 更新
tinydict['School'] = "RUNOOB" # 添加
 
 
print "tinydict['Age']: ", tinydict['Age']
print "tinydict['School']: ", tinydict['School']
```

##### 删除元素

使用`del dictionary[key]`从现有字典里删除元素，若键不存在于字典中，会触发 **KeyError 异常**（表示待删除的键未定义）。

```python
tinydict = {'Name': 'Zara', 'Age': 7, 'Class': 'First'}
 
del tinydict['Name']  # 删除键是'Name'的条目
tinydict.clear()      # 清空字典所有条目
del tinydict          # 删除字典
```

#### 获取字典元素数量与混合数据类型

字典支持获取元素数量，且键和值的数据类型具有灵活性。

##### 获取元素数量

使用`len`函数可获取字典中元素（键值对）的数量。

##### 键与值的数据类型

- 键必须是**不可变对象**（如字符串、整数、元组等），但一个字典中可包含多种不同的不可变类型的键；
- 与之关联的**值可以是任意类型的对象**，且单个字典中存储的值也可属于不同类型。

```python
# 混合数据类型的字典示例
mixed_dict = {'name': 'Alice', 25: 'age', ('male',): ['hobby1', 'hobby2']}
# 获取元素数量
print("元素数量：", len(mixed_dict))
# 查看各键值对的类型
print(type(mixed_dict['name']), type(25), type(mixed_dict[('male',)]))
```

#### 创建空字典

- 方法一：使用`{}`创建。

- 方法二：使用内置函数`dict()`创建。

- 特性：空字典创建后，可在程序执行过程中动态添加键值对元素。

```python
empty_dict1 = {}  # 方法1：使用大括号
empty_dict2 = dict()  # 方法2：使用 dict() 函数

print("空字典1:", empty_dict1)  # 输出：空字典1: {}
print("空字典2:", empty_dict2)  # 输出：空字典2: {}
print("空字典长度:", len(empty_dict1))  # 输出：空字典长度: 0
```

#### 使用 for 循环遍历字典

通用格式：`for key in dictionary:`，通过该循环可遍历字典中的每个键，进而访问对应的值。

```python
# 创建空字典
empty_dict1 = {}
# 增加键值对
empty_dict1["name"] = "张三"
empty_dict1["age"] = 25
empty_dict1["gender"] = "男"
empty_dict1["is_student"] = False
# 遍历
# -------
# 方法 1
for key in empty_dict1:
    print(f"键：{key}，对应值：{empty_dict1[key]}")
# 输出：
# 键：name，对应值：张三
# 键：age，对应值：25
# 键：gender，对应值：男
# 键：is_student，对应值：False
# -------
# 方法2
for key, value in empty_dict1.items():
    print(f"键：{key}，值：{value}")
# 输出（同方式1，但代码更简洁）：
# 键：name，值：张三
# 键：age，值：25
# 键：gender，值：男
# 键：is_student，值：False
# -------
# 方法3
for value in empty_dict1.values():
    print("值：", value)
# 输出：
# 值： 张三
# 值： 25
# 值： 男
# 值： False

```

#### 内置函数

| 函数                                                         | 描述                                               |
| :----------------------------------------------------------- | -------------------------------------------------- |
| [cmp(dict1, dict2)](https://www.runoob.com/python/att-dictionary-cmp.html) | 比较两个字典元素。                                 |
| [len(dict)](https://www.runoob.com/python/att-dictionary-len.html) | 计算字典元素个数，即键的总数。                     |
| [str(dict)](https://www.runoob.com/python/att-dictionary-str.html) | 输出字典可打印的字符串表示。                       |
| [type(variable)](https://www.runoob.com/python/att-dictionary-type.html) | 返回输入的变量类型，如果变量是字典就返回字典类型。 |

#### 内置方法

| 函数及描述 |                                                              |
| :--------- | ------------------------------------------------------------ |
| [dict.clear()](https://www.runoob.com/python/att-dictionary-clear.html)          |  删除字典内所有元素 |
| [dict.copy()](https://www.runoob.com/python/att-dictionary-copy.html)          |  返回一个字典的浅复制 |
| [dict.fromkeys(seq[, val\])](https://www.runoob.com/python/att-dictionary-fromkeys.html)          |  创建一个新字典，以序列 seq 中元素做字典的键，val 为字典所有键对应的初始值 |
| [dict.get(key, default=None)](https://www.runoob.com/python/att-dictionary-get.html)          |  返回指定键的值，如果值不在字典中返回default值 |
| [dict.has_key(key)](https://www.runoob.com/python/att-dictionary-has_key.html)          |  如果键在字典dict里返回true，否则返回false。Python3 不支持。 |
| [dict.items()](https://www.runoob.com/python/att-dictionary-items.html)          |  以列表返回可遍历的(键, 值) 元组数组 |
| [dict.keys()](https://www.runoob.com/python/att-dictionary-keys.html)          |  以列表返回一个字典所有的键 |
| [dict.setdefault(key, default=None)](https://www.runoob.com/python/att-dictionary-setdefault.html)          |  和get()类似, 但如果键不存在于字典中，将会添加键并将值设为default |
| [dict.update(dict2)](https://www.runoob.com/python/att-dictionary-update.html)          |  把字典dict2的键/值对更新到dict里 |
| [dict.values()](https://www.runoob.com/python/att-dictionary-values.html)         |  以列表返回字典中的所有值 |
| [pop(key[,default\])](https://www.runoob.com/python/python-att-dictionary-pop.html)         |  删除字典给定键 key 所对应的值，返回值为被删除的值。key值必须给出。 否则，返回default值。 |
| [popitem()](https://www.runoob.com/python/python-att-dictionary-popitem.html)         |  返回并删除字典中的最后一对键和值。 |

#### 字典合并操作符

使用`|`可将两个字典合并为一个新字典，合并后的新字典包含两者的所有元素。若两个字典存在相同键，新字典保留`|`**右侧字典（dict2）** 的值。

```python
dict1 = {'a': 1, 'b': 2}
dict2 = {'b': 3, 'c': 4}
dict3 = dict1 | dict2
print(dict3)  # 输出：{'a': 1, 'b': 3, 'c': 4}
print(dict1)  # 输出：{'a': 1, 'b': 2}（原字典未被修改）
```

#### 字典更新操作符

更新操作符`|=`与字典合并操作符（`|`）功能类似，但会将合并后的结果**直接赋值给操作符左侧的字典变量**，实现 “原地更新”。

```python
dict1 = {'a': 1, 'b': 2}
dict2 = {'b': 3, 'c': 4}
dict1 |= dict2
print(dict1)  # 输出：{'a': 1, 'b': 3, 'c': 4}（原dict1被直接修改）
```

#### 字典推导式

字典推导式是一种表达式，它读取一系列输入元素，并使用这些输入元素生成一个字典。

- 语法结构：

  以示例

  ```python
  squares = {item:item**2 for item in numbers}
  ```

  为例，分为两部分：

  - **结果表达式（Result Expression）**：`item:item**2`，定义字典键值对的生成规则（键为`item`，值为`item`的平方）。
  - **迭代表达式（Iteration Expression）**：`for item in numbers`，用于遍历可迭代对象`numbers`的元素。

  ```python
  numbers = [1, 2, 3, 4]
  squares = {item: item**2 for item in numbers}
  print(squares)  # 输出：{1: 1, 2: 4, 3: 9, 4: 16}
  ```

##### 示例

- 现有字符串列表，创建 “字符串 - 字符串长度” 映射的字典。

  ```python
  names = ['Jeremy', 'Kate', 'Peg']
  str_lengths = {item: len(item) for item in names}
  print(str_lengths)  # 输出：{'Jeremy': 6, 'Kate': 4, 'Peg': 3}
  ```


- 复制一个字典。

  ```python
  dict1 = {'A':1, 'B':2, 'C':3}
  dict2 = {k:v for k,v in dict1.items()}
  print(dict2)  # 输出：{'A': 1, 'B': 2, 'C': 3}
  ```

##### 带 if 子句的筛选逻辑

在字典推导式中通过`if`子句，对输入序列的元素进行条件筛选，仅保留满足条件的键值对。

```python
populations = {'New York': 8398748, 'Los Angeles': 3990456, 
               'Chicago': 2705994, 'Houston': 2325502, 
               'Phoenix': 1660272, 'Philadelphia': 1584138}
largest = {k:v for k,v in populations.items() if v > 2000000}
print(largest)  
# 输出：{'New York': 8398748, 'Los Angeles': 3990456, 'Chicago': 2705994, 'Houston': 2325502}
```
